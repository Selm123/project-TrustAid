# TrustAid
**The simple way to find the support you need â€” accurate, transparent, and easy to navigate.**

> TrustAid is an evidence-first assistant that guides people through government services with step-by-step actions, official links, and verifiable analytics. The UI you see in the mockups is included below as the product experience we ship.

![Alt text](image-url "TrustAid.png")

---

## ğŸ’¡ What TrustAid does (as shown in the mockups)

**Personalised guidance**
- The assistant opens with **plain-English prompts** and quick-reply chips (e.g., *Benefits & support*, *Births, deaths, marriages*, *Community & events*, *Travel & transport*, *Home & land*, *Business*).
- It recognises **life events** and offers a **summary of steps** before deep diving.

**Life-event support (example: bereavement)**
- User: *â€œWhat to do when someone diesâ€*  
- Assistant replies with:
  - An empathetic opener.
  - **Official links** (e.g., Services Australia; Service NSW).
  - A follow-up prompt: *â€œWould you like me to summarise the steps?â€*
- On *â€œYes, tell me the stepsâ€* âœ The assistant shows a **numbered list** with expandable â€œ**Learn more**â€ items:
  1. Register the death  
  2. Organise the funeral  
  3. Notify people and organisations  
  *(â€¦and more as available in the evidence)*

**Local connections**
- For eligible topics, TrustAid can suggest **nearby services** (e.g., registries, centres, clinics) and provide contact links.

**Plain-English explanations**
- Every answer is short, scannable, and **linked to sources** so users can verify quickly.

**Accurate results**
- TrustAid cites what it uses. When it canâ€™t verify something, it **says so** and proposes the safest next step instead of guessing.

**Secure and in your control**
- Read-only analytics, no PII joins, and transparent provenance (citations, timestamps, confidence, `audit_id`).

---

## ğŸ–¼ï¸ UX components (from the mockups)

- **Hero page**  
  - Title: *Access government services made easy*  
  - Secondary tagline: *The simple way to find the support you need*  
  - Feature cards:  
    - Personalised guidance  
    - Life event support  
    - Local connections  
    - Plain English explanations  
    - Accurate results  
    - Secure and control

- **Assistant widget (floating panel)**  
  - Greeting bubble + **quick category chips**.  
  - User message area with **send** button.  
  - **Summary prompt** pattern (*â€œWould you like a quick summary of the steps?â€* âœ *â€œYes, tell me the stepsâ€*).  
  - **Numbered list** + â€œ**Learn more**â€ toggles for each step.  
  - **Source links** appear as blue text with an external icon.

- **Action bar icons**  
  - Small, rounded controls for cancel / confirm / open assistant (as in mockups).

---

## ğŸ” How it stays trustworthy
- **Evidence-only generation**: answers are composed from retrieved official snippets; UI always shows **citations** and **timestamps**.  
- **Guardrails**: life-event filters (e.g., bereavement) keep the advice on-topic (e.g., *register death*, *funeral arrangements*, *notify agencies*), **never** irrelevant suggestions.  
- **Read-only analytics**: when analytics are shown, TrustAid returns **tables/charts with the exact SQL** and dataset metadata.  
- **Confidence & audit**: each reply contains a **confidence score** and an **`audit_id`** to reproduce the result.

---

## ğŸ§© Data we include (curated from Australian public sources)

- **Government Data Portal (data.gov.au)** â€” master index for discovery and refresh; TrustAid links back to each datasetâ€™s page.  
- **Australian Government Transparency Portal** â€” entity financial/performance reports; used to add program context and cite accountability.  
- **myGov Digital Services Performance** â€” availability and usage; TrustAid can signal degraded services and suggest alternatives.  
- **Digital Service Standard Compliance** â€” badges compliant services and explains routing choices.  
- **AusTender Procurement Statistics** â€” supports read-only analytics (outliers, vendor trends) with exact SQL shown.  
- **AI Technical Standards Design Statements (All)** â€” underpins explainability text, refusal templates, and UI transparency badges.

> Optional local enrichments: state/territory BDM pages, NHSD/ACSL service directories, ACNC charities, ABS geographies/SEIFA for equitable suggestions.

---

## ğŸ› ï¸ Architecture (high level)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     TrustAid â€” Architecture                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SECTION A â€” Progressive Web App (device)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[ Service Worker ]
    â”œâ”€ Offline caches (for low-connectivity zones)
    â”‚   â€¢ steps_cache  (summary of steps + links)
    â”‚   â€¢ services_cache (local offices/centres directories)
    â”‚   â€¢ ui_assets_cache
    â””â”€ Sync queue (retries POSTs when back online)

[ Assistant Widget (UI) ]
    â”œâ”€ Quick category chips: Benefits & support | Births, deaths, marriages | â€¦
    â”œâ”€ Conversation bubbles (plain English)
    â””â”€ â€œWould you like a quick summary of the steps?â€ â†’ â€œYes, tell me the stepsâ€
        â†“
        POST /chat/query  (JSON: {query, locale, location?, consent_flags?})

SECTION B â€” Backend API (FastAPI)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[ Intent & Topic Guardrails ]
    â”œâ”€ Life-event detection (e.g., bereavement)
    â”œâ”€ Safety filters (deny PII asks, out-of-scope topics)
    â””â”€ Routing hints (guidance vs analytics are handled inside one engine)

[ Guidance & Analytics Engine (single pipeline) ]
    â”œâ”€ Evidence Retriever
    â”‚     â†’ Chroma (vector)  âŸµ embeddings (OpenAI; fallback TF-IDF)
    â”‚     â†’ Dataset Registry (provenance: title/url/updated_at/jurisdiction)
    â”œâ”€ Data Query Unit (read-only)
    â”‚     â†’ SQL builder with allow-lists / column deny-lists (no PII joins)
    â”‚     â†’ Read-only Warehouse (SQLite/DuckDB/Postgres)
    â”œâ”€ Synthesiser (evidence-only generation)
    â”‚     â€¢ Produces JSON: steps + â€œLearn moreâ€ links OR tables/charts + exact SQL
    â”‚     â€¢ Adds confidence {level,score} and mode {openai|tfidf}
    â””â”€ Response Composer
          â€¢ Merges evidence, analytics (if any), adds audit_id

[ Audit & Telemetry ]
    â”œâ”€ Per-request audit_id, sources/SQL, confidence, timings
    â””â”€ (Optional) event stream for product analytics (no PII)

SECTION C â€” Data Layer (server)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[ Chroma (Vector DB) ]
    â€¢ Curated snippets from official pages (title, url, updated_at, text)
[ Read-only Warehouse ]
    â€¢ Normalised public tables (CSV/API ingested)
[ Dataset Registry / Metadata ]
    â€¢ Provenance, refresh cadence, schema info
[ Server Cache ]
    â€¢ Hot answers, embeddings, SQL results (TTL)

SECTION D â€” Ingestion & Refresh (ETL)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[ Fetchers / Schedulers ]
    â”œâ”€ data.gov.au index
    â”œâ”€ Transparency Portal
    â”œâ”€ myGov Digital Services Performance
    â”œâ”€ Digital Service Standard Compliance
    â”œâ”€ AusTender Procurement Statistics
    â””â”€ AI Technical Standards Design Statements
      â†“
[ Clean/Normalise ]
      â†“
[ Upsert ]
    â”œâ”€ Chroma (documents/snippets with metadata)
    â””â”€ Warehouse (tables/views)

END-TO-END FLOW (example shown in mockups)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
User types: â€œWhat to do when someone diesâ€
  â†’ UI posts /chat/query
  â†’ Backend applies life-event guardrail (bereavement)
  â†’ Evidence Retriever pulls gov pages (Services Australia, state BDM, etc.)
  â†’ Synthesiser creates numbered steps with â€œLearn moreâ€ links + confidence + audit_id
  â†’ Response Composer returns JSON
  â†’ UI renders empathy message â†’ â€œWould you like a quick summary of the steps?â€ â†’ numbered list
  â†’ Service Worker caches steps + links for offline reuse

NOTES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Single pipeline inside the backend: it handles both guidance and analytics, but always
  returns structured JSON with citations/SQL, confidence, and audit_id.
â€¢ All analytics are read-only; no PII joins; strict allow-lists.
â€¢ PWA caches are designed to keep essential guidance usable in low-connectivity areas.

```

---

## ğŸš€ Quick start

### Backend
```bash
# .env (minimum)
OPENAI_API_KEY=sk-...
OPENAI_CHAT_MODEL=gpt-4o-mini
OPENAI_EMBED_MODEL=text-embedding-3-small
RAG_BACKEND=openai
ANONYMIZED_TELEMETRY=false

uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

### Health & mode:
```bash
Copy code
curl http://localhost:8000/health
curl http://localhost:8000/debug/rag   # {"mode":"openai"} or {"mode":"tfidf"}
```

### Frontend
Set API Base URL to your backend, then run the web client.

The chat widget renders: welcome â†’ category chips â†’ user input â†’ summary prompt â†’ numbered steps with Learn more and source links.

### ğŸ§ª Evaluation 
Real flows that match the mockups (e.g., Death and bereavement).

Citations visible in every answer; summary-then-details pattern.

If evidence is thin, TrustAid refuses gracefully and links the best official source.

For analytics prompts, we show exact SQL and dataset metadata with the chart/table.

ğŸ“„ License
MIT Â© 2025 TrustAid Team

Design note: the yellow accent, rounded chips, and the â€œsummary of stepsâ€ pattern are intentional to keep the experience friendly, fast, and verifiable.